<!--pages/daily-insight/daily-insight.wxml-->
<view class="container">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="page-header">
    <text class="header-title">ğŸ’¡ ä»Šæ—¥æ¨èåˆ†æ</text>
    <text class="header-subtitle">åŸºäºæ•°æ®çš„æ™ºèƒ½å‘ç°</text>
  </view>

  <!-- æ—¥æœŸé€‰æ‹©å™¨ -->
  <view class="date-selector">
    <text class="date-label">é€‰æ‹©æ—¥æœŸ</text>
    <picker mode="date" value="{{selectedDate}}" start="2021-05-01" end="2021-05-31" bindchange="onDateChange">
      <view class="date-picker">
        <text>{{selectedDateDisplay}}</text>
        <text class="arrow">â€º</text>
      </view>
    </picker>
  </view>

  <!-- å…³é”®å‘ç°å¡ç‰‡ -->
  <view class="insights-section">
    <view class="section-title">
      <text class="title-icon">ğŸ”</text>
      <text class="title-text">å…³é”®å‘ç°</text>
    </view>

    <!-- å‘ç°å¡ç‰‡åˆ—è¡¨ -->
    <view class="insight-card" wx:for="{{insights}}" wx:key="id">
      <view class="card-header">
        <view class="card-icon" style="background: {{item.color}};">
          <text>{{item.icon}}</text>
        </view>
        <view class="card-title-area">
          <text class="card-title">{{item.title}}</text>
          <text class="card-category">{{item.category}}</text>
        </view>
      </view>

      <view class="card-content">
        <text class="content-text">{{item.content}}</text>
      </view>

      <view class="card-data" wx:if="{{item.data}}">
        <view class="data-row" wx:for="{{item.data}}" wx:key="label" wx:for-item="dataItem">
          <text class="data-label">{{dataItem.label}}</text>
          <text class="data-value">{{dataItem.value}}</text>
        </view>
      </view>

      <view class="card-action" wx:if="{{item.actionText}}" bindtap="handleInsightAction" data-action="{{item.action}}">
        <text class="action-text">{{item.actionText}}</text>
        <text class="action-arrow">â€º</text>
      </view>
    </view>
  </view>

  <!-- æ¨èç«™ç‚¹ -->
  <view class="recommend-section" wx:if="{{recommendedStations.length > 0}}">
    <view class="section-title">
      <text class="title-icon">â­</text>
      <text class="title-text">æ¨èå…³æ³¨ç«™ç‚¹</text>
    </view>

    <view class="station-card" wx:for="{{recommendedStations}}" wx:key="stationId" bindtap="goToStationDetail" data-station-id="{{item.stationId}}">
      <view class="station-header">
        <text class="station-name">{{item.name}}</text>
        <view class="station-badge" style="background: {{item.badgeColor}};">
          <text>{{item.badgeText}}</text>
        </view>
      </view>

      <view class="station-reason">
        <text>æ¨èç†ç”±ï¼š{{item.reason}}</text>
      </view>

      <view class="station-stats">
        <view class="stat-item">
          <text class="stat-label">éœ€æ±‚é‡</text>
          <text class="stat-value">{{item.demandDisplay}}</text>
        </view>
        <view class="stat-item">
          <text class="stat-label">å³°å€¼æ—¶æ®µ</text>
          <text class="stat-value">{{item.peakHour}}:00</text>
        </view>
        <view class="stat-item">
          <text class="stat-label">å¢é•¿ç‡</text>
          <text class="stat-value trend-{{item.trend}}">{{item.trendDisplay}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- æ“ä½œå»ºè®® -->
  <view class="suggestions-section" wx:if="{{suggestions.length > 0}}">
    <view class="section-title">
      <text class="title-icon">ğŸ’¡</text>
      <text class="title-text">æ“ä½œå»ºè®®</text>
    </view>

    <view class="suggestion-item" wx:for="{{suggestions}}" wx:key="id">
      <view class="suggestion-icon">
        <text>{{item.priority}}</text>
      </view>
      <view class="suggestion-content">
        <text class="suggestion-text">{{item.text}}</text>
      </view>
    </view>
  </view>

  <!-- åº•éƒ¨æç¤º -->
  <view class="footer-tip">
    <text class="tip-text">ğŸ’¡ æ•°æ®æ¯æ—¥æ›´æ–°ï¼Œå»ºè®®å®šæœŸæŸ¥çœ‹</text>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-overlay" wx:if="{{loading}}">
    <view class="loading-content">
      <view class="loading-spinner"></view>
      <text class="loading-text">æ­£åœ¨åˆ†æ...</text>
    </view>
  </view>
</view>
